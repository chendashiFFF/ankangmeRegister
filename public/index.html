<!doctype html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>邀请码执行台</title>
  <link rel="stylesheet" href="/style.css" />
</head>

<body>
  <main class="container">
    <h1>邀请码执行台</h1>

    <!-- 好主码配置 -->
    <section class="card" style="margin-bottom:12px">
      <h2>好主码 SMS 平台</h2>
      <label>服务器</label>
      <input id="hzmServer" value="https://api.haozhuma.com" placeholder="https://api.haozhuma.com" />
      <label>用户名</label>
      <input id="hzmUser" placeholder="好主码用户名" />
      <label>密码</label>
      <input id="hzmPass" type="password" placeholder="好主码密码" />
      <label>项目ID (sid)</label>
      <input id="hzmSid" placeholder="项目编号" />
      <div class="actions" style="margin-top:10px">
        <button id="hzmSaveBtn" class="secondary">保存配置</button>
        <button id="hzmLoginBtn" class="secondary">登录好主码</button>
        <button id="hzmBalanceBtn" class="secondary">查询余额</button>
      </div>
      <p id="hzmStatus" class="muted" style="margin:8px 0 0">未登录</p>
    </section>

    <!-- 代理配置 -->
    <section class="card" style="margin-bottom:12px">
      <label>代理模式</label>
      <div class="input-row">
        <select id="proxyMode">
          <option value="scrape_do">Scrape.do（自动换IP）</option>
          <option value="custom">自定义代理</option>
          <option value="direct">直连（不用代理）</option>
        </select>
        <button id="proxySaveBtn" class="secondary">保存</button>
      </div>
      <div id="customProxyRow" style="margin-top:8px">
        <input id="customProxyUrl" placeholder="http://user:pass@host:port" />
      </div>
      <div id="scrapeDoRow" style="margin-top:8px">
        <input id="scrapeDoToken" placeholder="Scrape.do API Token" />
      </div>
      <p id="proxyInfo" class="muted" style="margin:8px 0 0">代理加载中...</p>
    </section>

    <!-- 共用配置 -->
    <section class="card">
      <label for="inviteCode">邀请码</label>
      <input id="inviteCode" value="6RQV6P" placeholder="请输入你的邀请码" />

      <label for="appVersion">App 版本号</label>
      <input id="appVersion" value="1.2.0" placeholder="1.2.0" />
    </section>

    <!-- 自动模式 -->
    <section class="card">
      <h2>自动执行</h2>
      <p class="muted">通过好主码自动获取号码、接收验证码、登录并填写邀请码。</p>
      <label>执行次数</label>
      <input id="autoCount" type="number" value="1" min="1" max="999" />
      <div class="actions" style="margin-top:10px">
        <button id="autoRunBtn">开始自动执行</button>
        <button id="autoStopBtn" class="secondary" style="display:none">停止</button>
      </div>
      <pre id="autoStatus" class="status"></pre>
    </section>

    <!-- 手动模式 -->
    <section class="card">
      <h2>手动执行</h2>

      <label>手机号</label>
      <div class="input-row">
        <input id="phone" placeholder="13800000000" />
        <button id="smsBtn" class="secondary">发送验证码</button>
      </div>

      <label for="smsCode">验证码</label>
      <input id="smsCode" placeholder="收到的短信验证码" />

      <div class="actions single">
        <button id="runBtn">登录并填码</button>
      </div>
      <pre id="statusBox" class="status"></pre>
    </section>

    <section class="grid">
      <div class="stat"><span>总数</span><strong id="total">0</strong></div>
      <div class="stat"><span>成功</span><strong id="success">0</strong></div>
      <div class="stat"><span>失败</span><strong id="fail">0</strong></div>
      <div class="stat"><span>成功率</span><strong id="rate">0%</strong></div>
    </section>

    <section class="card">
      <h2>结果</h2>
      <button id="clearBtn" class="secondary"
        style="width:auto;margin-bottom:10px;padding:6px 14px;font-size:13px">清空记录</button>
      <table>
        <thead>
          <tr>
            <th>#</th>
            <th>手机号</th>
            <th>状态</th>
            <th>代理</th>
            <th>阶段</th>
            <th>原因</th>
          </tr>
        </thead>
        <tbody id="resultsBody"></tbody>
      </table>
    </section>
  </main>

  <script src="/app.js"></script>
</body>

</html>